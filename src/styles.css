@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========= Variables de thème ========= */
@layer base {
  /* Thème clair (par défaut) */
  :root {
    --base-bg:   255 255 255;   /* #ffffff */
    --base-card: 248 250 252;   /* #f8fafc */
    --base-text: 15 23 42;      /* #0f172a */
    --base-mut:  100 116 139;   /* #64748b */
  }

  /* Thème sombre */
  .dark {
    --base-bg:   11 15 26;      /* #0B0F1A */
    --base-card: 17 24 42;      /* #11182A */
    --base-text: 230 238 249;   /* #E6EEF9 */
    --base-mut:  167 179 199;   /* #A7B3C7 */
  }

  /* Fond + texte pilotés par tokens */
  body { @apply bg-base-bg text-base-text; }
}

/* ========= Tes composants (inchangés) ========= */
@layer components{
  .container-xl{@apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;}
  .section{@apply py-16 sm:py-20;}
  .title{@apply text-3xl sm:text-4xl font-extrabold tracking-tight;}
  .muted{@apply text-base text-base-text/80;}
  .card{@apply bg-base-bg/40 backdrop-blur border border-white/10 rounded-2xl shadow-soft;}
  .btn{@apply inline-flex items-center gap-2 rounded-xl border border-white/10 px-4 py-2 transition;}
  .btn-primary{@apply bg-gradient-to-tr from-brand-1 to-brand-2 text-black font-semibold hover:brightness-110;}
  .btn-ghost{@apply bg-white/5 text-base-text hover:bg-white/10;}
}

/* ========= PATCH LIGHT-ONLY (corrigé) ========= */
@layer components {
  /* Liens non-boutons : couleur de base + survol lisible en mode clair uniquement */
  html:not(.dark) a:not(.btn):not(.btn-primary):not(.btn-ghost) {
    color: rgb(var(--base-text) / 0.80);
    transition: color .15s ease-in-out;
  }
  html:not(.dark) a:not(.btn):not(.btn-primary):not(.btn-ghost):hover {
    color: rgb(var(--base-text));
  }

  /* Formulaires en clair : fond/texte/placeholder/bordure/focus */
  html:not(.dark) input[type="text"],
  html:not(.dark) input[type="email"],
  html:not(.dark) input[type="password"],
  html:not(.dark) input[type="tel"],
  html:not(.dark) input[type="url"],
  html:not(.dark) input[type="number"],
  html:not(.dark) input[type="search"],
  html:not(.dark) input[type="date"],
  html:not(.dark) input[type="time"],
  html:not(.dark) input[type="datetime-local"],
  html:not(.dark) select,
  html:not(.dark) textarea {
    background-color: rgb(var(--base-card));
    color: rgb(var(--base-text));
    border-color: rgb(0 0 0 / 0.10);
  }
  html:not(.dark) input::placeholder,
  html:not(.dark) textarea::placeholder {
    color: rgb(var(--base-text) / 0.50);
  }
  html:not(.dark) input:focus,
  html:not(.dark) select:focus,
  html:not(.dark) textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgb(34 227 164 / 0.40); /* brand-1/40 */
    border-color: rgb(34 227 164 / 0.60);
  }

  /* Bordures figées en white/10 -> lisibles en clair (noir 10%) */
  html:not(.dark) .card,
  html:not(.dark) .btn,
  html:not(.dark) .btn-ghost,
  html:not(.dark) .btn-primary,
  html:not(.dark) header,
  html:not(.dark) footer,
  html:not(.dark) .border-white\/10 {
    border-color: rgb(0 0 0 / 0.10) !important;
  }

  /* Bouton ghost : léger fond en clair */
  html:not(.dark) .btn-ghost {
    background-color: rgb(0 0 0 / 0.05);
  }
  html:not(.dark) .btn-ghost:hover {
    background-color: rgb(0 0 0 / 0.10);
  }
}
/* ========= FIN PATCH LIGHT-ONLY ========= */
